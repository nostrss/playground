---
title: 모노레포란 무엇인가?
description: 여러분은 어떤 구조로 프로젝트를 진행하고 계신가요?
date: 2023-10-23
tags: monorepo multi-repo monolithic frontend
---

요새 프런트엔드 기술과 공고를 보다 보면 아래와 같은 내용을 자주 볼 수 있었다.

> 우대사항 : 모노레포 관련 경험 자

면접때도 한번 질문을 받은 경험이 있었는데, 경험해보지 못했다고 말하고 넘어갔었는데 이번에 한번 알아보려고 한다.

## 등장 배경

[📌 (참고) 모던 프론트엔드 프로젝트 구성 기법 - 모노레포 개념 편 📌](https://d2.naver.com/helloworld/0923884)

일단 `모노레포`가 등장한 배경을 알아보자.

`모노레포`가 등장하기전 소프트웨어 애플리케이션은 모듈화가 되지 않은 상태로 개발되었다.

아래의 그림을 살펴보자.

![0a710ba9-7e47-1064-817f-86e0ae025d1b](https://github.com/nostrss/next13-blog/assets/56717167/cb60cd81-a94c-40e2-a469-3f1ad93c3de5)

위의 구조는 `모놀리식`이라 불리는 `모노레포` 이전의 소프트웨어의 모습이다.

블로그와 같은 작은 프로젝트라면 위의 구조가 괜찮을 수 있지만, 만약 구글, 페이스북, 인스타그램과 같이 거대 프로젝트라면 어떨까?

내가 생각하기에 일단 아래와 같은 문제가 발생할 것 같다.

- 로컬에 소스코드 클론 시 그 용량이 어마 무시 할 것 같다.
- 빌드 시간이 오래 걸리고 배포의 단위가 매우 커질 것 같다.

이런 한계를 극복하기 위한 방법중에 하나로 `멀티레포(폴리레포)`의 구조도 존재한다.

![0a710ba9-7e47-1064-817f-86e13d875e4e (1)](https://github.com/nostrss/next13-blog/assets/56717167/5436e609-7090-494e-817d-ad31e310a0cd)

각 기능, 관심사별로 구분된 독자적인 저장소(레포지토리)를 가지고 있는 구조이다.

그렇기 때문에 각 프로젝트별로 `자율성`이 매우 높고, `독립`적인 개발, `빌드`` 등이 가능한 구조이다.

내가 회사는 일했던 멀티레포를 변형한 구조로 운영이 되었었다.

개인적으로 느꼈던 멀티레포의 장,단점 아래와 같다.

- 장점

  - 각 프로젝트별로 자율성이 높다.
  - 각 프로젝트별의 규모가 작아진다.
  - 빌드, 테스트, 배포의 범위가 작아진다.

- 단점
  - 중복코드가 존재하게 된다.
  - 관리 포인트가 많아진다.
  - 일관성 없는 코드 컨벤션이 발생할 수 있다.
  - 패키지 버전의 일관성이 없을 수 있다.

나는 멀티레포의 `단점`들이 더 크게 다가왔었는데, 레포의 개수가 10개가 넘어가는 서비스를 혼자 관리하다 보니 어려움이 많았다.

특히 `React`의 버전이 15부터 17까지 다양하게 존재해서 hooks를 쓸 수 없는 프로젝트도 있었고, 어떤 프로젝트는 Typescript를 적용한 프로젝트도 있었다.

거기에 상태관리 라이브러리도 redux, mobx, redux-toolkit등 다양하게 버전별로 존재하다 보니 개발하기 매우 어려웠다.

> 개인적인 생각이지만 멀티레포의 경우 규모가 큰 회사에서 팀별로 레포를 하나씩 담당할때 적합한 구조인 것 같다.

## 모노레포란?

> 모노레포(monorepo) 구조는 두 개 이상의 프로젝트가 동일한 저장소에 저장되는 소프트웨어 개발 전략이다. 앞선 예시의 분리된 모듈들은 모노레포에서 여전히 독자 프로젝트로 존재하지만 저장소는 같은 곳을 사용한다.

![0a710ba9-7e47-1064-817f-86e20998613f](https://github.com/nostrss/next13-blog/assets/56717167/320c8923-f1fd-44b3-ba16-839d5f55fdc1)

단순히 개념을 잡아보면 하나의 깃허브 저장소에 로그인 프로젝트, 회원가입 프로젝트, 게시글 프로젝트 등등 여러 프로젝트를 모아놓은 구조이다.

하지만 여기서 추가적인 모노레포의 특징이 있다. 바로 `프로젝트 간의 관계`이다.

흔히 모노레포에서는 프로젝트 사이에 의존성이 존재하거나 같은 제품군이거나 하는 정의된 관계가 존재한다고 한다.

그리고 관계를 관리할 수 있는 모노레포 관리 도구도 존재하는데 `Lerna`, `Yarn`, `npm`, `pnpm`, `Nx`을 많이 사용한다고 한다.

이런 `모노레포`는 멀티레포의 문제를 이렇게 해결한다.

- 쉬운 프로젝트 생성
- 쉬운 의존성 관리
- 단일화된 관리 포인트
- 일관된 개발자 경험 제공
- 테스트 및 빌드 시간 단축

요즘들어 프론트엔드 개발자가 javascript, react, next를 잘 하는 것도 알아야 하지만

상황과 인력구조에 따라 개발환경이나 프로제팅 구조를 변경하는 능력도 필요하다고 느껴진다.

> 알아야 할 게 너무 많다..
